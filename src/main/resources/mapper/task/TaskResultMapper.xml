<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.felixstudio.automationcontrol.mapper.task.TaskResultMapper">

    <select id="findByKey" resultType="Integer">
        select count(1) from task_results
        where task_key = #{taskKey}
          and (status = 2 or (status = -1 and (message like '%秒杀活动%' or message like '%额度不足%')))
    </select>

</mapper>